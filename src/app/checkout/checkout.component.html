<section>
  <div class="grid grid-cols-1 md-wrapper:grid-cols-2">
    <div class="order-2 md-wrapper:order-1 flex justify-end">
      <div class="max-w-[580px] w-full p-[3.8rem]">
        <div>
          <h3 class="text-center text-sm text-gray-600">Express checkout</h3>
          <div
            class="mt-[17px] h-[48px] w-full flex justify-between gap-[11px]"
          >
            <div
              class="flex flex-1 justify-center items-center rounded-lg bg-[#390ced] cursor-pointer"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 47 20"
                title="Shop"
                class="w-[47px] h-[20px]"
                style="fill: white"
              >
                <path
                  d="m9.095 6.766-2.33 1.186C6.233 7.035 5.5 6.565 4.48 6.565q-1.665 0-1.665 1.007c0 .716.821.873 2.663 1.275 1.842.403 3.931.985 3.931 3.29 0 2.238-1.73 3.58-4.593 3.58-2.308 0-4.02-.984-4.816-2.73l2.33-1.163c.488 1.077 1.331 1.633 2.486 1.633 1.198 0 1.797-.335 1.797-1.052 0-.716-.823-.872-2.668-1.275C2.101 10.727.02 10.145.02 7.84c0-2.17 1.709-3.536 4.46-3.536 2.153 0 3.773.873 4.615 2.462M11.05.5h2.884v5.102c.754-.828 1.842-1.298 3.085-1.298 2.485 0 4.26 1.925 4.26 4.655v6.646h-2.884V8.959c0-1.275-.932-2.216-2.22-2.216-1.287 0-2.24.962-2.24 2.216v6.646h-2.886zM23.166 5.11c.954-.671 2.33-1.14 3.795-1.14 3.906 0 6.746 2.663 6.746 6.311 0 3.401-2.441 5.774-5.837 5.774-2.907 0-4.992-1.97-4.992-4.61 0-1.79 1.067-3.111 2.574-3.626l1.22 2.082c-.82.38-1.13.94-1.13 1.633 0 1.14.955 1.947 2.33 1.947 1.687 0 3.018-1.343 3.018-3.155 0-2.127-1.664-3.737-3.927-3.737a4.5 4.5 0 0 0-2.508.738zM38.19 14.33v5.17h-2.885V4.417h2.818V5.78c.866-.94 2.086-1.477 3.462-1.477 3.04 0 5.415 2.484 5.415 5.707s-2.375 5.707-5.415 5.707c-1.354 0-2.53-.515-3.395-1.388m5.947-4.341c0-1.858-1.287-3.223-3.04-3.223-1.731 0-3.04 1.388-3.04 3.223s1.309 3.223 3.04 3.223c1.753 0 3.042-1.366 3.042-3.223z"
                ></path>
              </svg>
            </div>
            <img
              class="cursor-pointer flex-1 object-cover rounded-lg"
              src="./paypal_gold.png"
              alt="paypal"
            />
            <img
              class="cursor-pointer flex-1 object-cover rounded-lg"
              src="./google_pay.png"
              alt="google pay"
            />
          </div>
        </div>
        <div
          class="relative h-[21px] w-auto flex items-center mt-[17px] mb-[26px]"
        >
          <div class="w-full h-px bg-[#dfdfdf]"></div>
          <div
            class="absolute top-0 left-1/2 -translate-x-1/2 px-3.5 flex justify-center items-center bg-white"
          >
            <p class="uppercase text-sm text-gray-600 select-none">OR</p>
          </div>
        </div>
        <div>
          <h2 class="text-[21px] font-semibold mb-3.5">Contact</h2>
          <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()">
            <input
              id="email"
              name="email"
              type="email"
              autocomplete="email"
              formControlName="email"
              placeholder="Email"
              class="border border-gray-400 p-2 rounded w-full placeholder:text-gray-600 placeholder:text-sm"
              [ngClass]="{
                'border-red-600': submitted && email.invalid,
                'border-gray-400': !(submitted && email.invalid)
              }"
            />
            <div class="min-h-[20px] mt-1 text-sm">
              <p
                class="text-red-700"
                *ngIf="submitted && email?.errors?.['email']"
              >
                Invalid email format
              </p>
              <p
                class="text-red-700"
                *ngIf="submitted && email?.errors?.['required']"
              >
                Enter an Email
              </p>
            </div>

            <div class="flex items-center mt-3.5 mb-8">
              <input type="checkbox" name="marketing" id="marketing" />
              <label class="pl-[11px]" for="marketing"
                >Email me with news and offers</label
              >
            </div>

            <h2 class="text-[21px] font-semibold mb-3.5">Delivery</h2>

            <button
              class="bg-black rounded-lg text-white w-full p-3.5 font-semibold mt-3"
              type="submit"
            >
              Review Order
            </button>
          </form>
        </div>
      </div>
    </div>
    <div class="order-1 md-wrapper:order-2 bg-[#fafafa]">
      <div
        class="sticky max-w-[480px] w-full right-auto left-auto top-0 bottom-0 p-[3.6rem]"
      >
        <div class="relative flex flex-col gap-[1.4rem]">
          <div class="flex flex-col gap-[1.4rem]">
            <div *ngFor="let item of cartItems" class="flex">
              <div class="relative">
                <img
                  class="w-[64px] h-[64px]"
                  [src]="item.image"
                  [alt]="item.name"
                />
                <div
                  class="absolute flex justify-center items-center right-[-7px] top-[-7px] rounded-full text-xs text-white bg-[#0000008f] min-w-[1.2rem] min-h-[1.2rem]"
                >
                  <p>{{ item.quantity }}</p>
                </div>
              </div>
              <div class="flex flex-1 flex-col pl-[14px] font-normal text-xs">
                <p>{{ item.name }}, {{ item.company }}</p>
                <p class="text-[#0000008f]">
                  {{ this.getColorName(item.selectedColor) }}
                  <span
                    *ngIf="item.isSubscribed && item.subscriptionPlan"
                    class="text-gray-600"
                  >
                    / {{ getSubscriptionDisplay(item.subscriptionPlan) }}
                  </span>
                  <span *ngIf="item.giftWrap" class="text-gray-600"
                    >/ Gift Wrap</span
                  >
                </p>
              </div>
              <p class="text-xs">
                {{ item.price * (item.quantity || 1) | currency : "USD" }}
              </p>
            </div>
          </div>
          <div
            class="grid grid-cols-[minmax(0,1fr)_minmax(auto,max-content)] gap-3.5"
          >
            <input
              class="p-[13.5px] border rounded-lg border-gray-400 focus:outline-none placeholder:text-gray-600 placeholder:text-sm"
              type="text"
              placeholder="Discount code or gift card"
            />
            <button
              class="px-3.5 rounded-lg border border-[#dadada] bg-gray-100 text-gray-600"
            >
              Apply
            </button>
          </div>
          <div class="grid text-sm">
            <div class="flex justify-between">
              <p>
                Subtotal - <span>{{ cartItemCount }} items</span>
              </p>
              <p>${{ subtotal / 100 | number : "1.0-2" }}</p>
            </div>
            <div class="flex justify-between mt-[11px]">
              <p class="flex items-center gap-2">
                Shipping
                <span class="material-symbols-outlined !text-sm h-3.5">
                  help
                </span>
              </p>
              <p class="text-gray-600">Enter shipping address</p>
            </div>
            <div class="flex justify-between mt-[21px]">
              <p class="text-[19px] font-semibold">Total</p>
              <p class="text-[19px] font-semibold">
                <Span class="text-sm text-gray-600 font-normal">USD</Span> ${{
                  subtotal / 100 | number : "1.0-2"
                }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
